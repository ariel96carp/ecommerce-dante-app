import{s as O,i as f}from"./script.85973ccb.js";import{c as L}from"./closeModal.5c9c7dbf.js";const q=(C,y)=>{document.addEventListener("click",d=>{const m=document.querySelectorAll(C);d.composedPath().forEach(g=>{m.forEach(S=>{g===S&&y.call(S,d)})})})};window.addEventListener("DOMContentLoaded",()=>{const C=["B4sdED","5Rl8f","LFs92","R46Ej"],y=["XXL","XL","Small","Large"],d=JSON.parse(sessionStorage.getItem("products")),m=({sales:a})=>{const c=document.getElementById("sales-table"),s=document.getElementById("sale-row").content,l=document.createDocumentFragment();a.forEach(o=>{const e=s.querySelector(".code");e.textContent=o.id;const t=s.querySelector(".size");t.textContent=y[o.size];const r=s.querySelector(".image");r.src=o.url;const n=s.querySelector(".name");n.textContent=o.name;const i=s.querySelector(".price");i.textContent=`$${o.price.toFixed(2)}`;const b=s.querySelector(".quantity");b.value=o.quantity;const u=s.querySelector(".subtotal");u.textContent=`$${(o.price*o.quantity).toFixed(2)}`;const E=s.cloneNode(!0);l.appendChild(E)}),c.replaceChildren(l)};m(d);const p=({discount:a,sales:c})=>{const s=document.getElementById("totals-container"),l=document.getElementById("cart-totals").content,o=l.querySelector(".coupon");a.isActive?o.classList.add("!table-row"):o.classList.remove("!table-row");const e=parseFloat(a.rate)/100;let t=0;c.forEach(u=>{t+=u.price*u.quantity});const r=l.querySelector(".cart-subtotal");r.textContent=`$${t.toFixed(2)}`;const n=l.querySelector(".cart-total"),i=`$${(t-t*e).toFixed(2)}`;n.textContent=a.isActive?i:`$${t.toFixed(2)}`;const b=l.cloneNode(!0);s.replaceChildren(b)};p(d),q(".remove",a=>{const c=JSON.parse(sessionStorage.getItem("products")),s=a.target.closest("td").nextElementSibling,l=s.nextElementSibling.textContent,o=s.textContent,e=Object.entries(c).map(([t,r])=>{switch(!0){case t==="sales":return[t,r.filter(n=>!(n.id===o&&n.size===y.indexOf(l)))];default:return[t,r]}});m(Object.fromEntries(e)),p(Object.fromEntries(e)),O(Object.fromEntries(e)),sessionStorage.setItem("products",JSON.stringify(Object.fromEntries(e)))});const g=({discount:a})=>{const c=document.querySelector(".coupon-submit");a.isActive&&!c.disabled?(c.disabled=!0,c.classList.add("opacity-50","cursor-auto")):(c.disabled=!1,c.classList.remove("opacity-50","cursor-auto"))};g(d);const S=document.getElementById("coupon-form");S.addEventListener("submit",a=>{a.preventDefault();const c=document.getElementById("error-coupon"),l=a.target.coupon.value;if(C.find(o=>o===l.trim())){const o=JSON.parse(sessionStorage.getItem("products")),e=Object.entries(o).map(([t,r])=>{switch(!0){case t==="discount":return[t,Object.fromEntries(Object.entries(r).map(([n,i])=>n==="isActive"?[n,i=!0]:[n,i]))];default:return[t,r]}});p(Object.fromEntries(e)),g(Object.fromEntries(e)),sessionStorage.setItem("products",JSON.stringify(Object.fromEntries(e))),S.reset()}else c.classList.toggle("!block"),setTimeout(()=>{c.classList.toggle("!block")},2e3)});const h=document.getElementById("form-modal");L(h),document.addEventListener("click",a=>{const c=({sales:e,discount:t})=>{let r=0;if(e.forEach(n=>{r+=n.price*n.quantity}),t.isActive){const n=parseFloat(t.rate)/100;r=r-r*n}return r},s=JSON.parse(sessionStorage.getItem("products")),l=a.target,o=document.getElementById("sales-button");if(l===o)if(s.sales.length>0){const e=c(s);h.classList.toggle("show-modal");const t=h.querySelector(".status"),n=document.getElementById("loader").content.cloneNode(!0);t.replaceChildren(n),setTimeout(()=>{m(f),g(f),p(f),O(f),sessionStorage.setItem("products",JSON.stringify(f));const i=document.getElementById("success-alert").content,b=i.querySelector(".logo"),u=i.querySelector(".payment");b.src=`${new URL("/assets/logo2.8d57188e.png",self.location).href}`,u.textContent=`You paid $${e} in an installment of: $${e.toFixed(2)}`;const E=i.cloneNode(!0);t.replaceChildren(E)},2e3)}else{const e=document.getElementById("empty-cart");e.classList.remove("hidden"),setTimeout(()=>{e.classList.add("hidden")},2e3)}});const x=document.getElementById("table-container"),I=()=>{matchMedia("(max-width: 480px)").matches?x.style.maxWidth=`${document.body.clientWidth}px`:x.removeAttribute("style")};I(),window.addEventListener("resize",I)});
